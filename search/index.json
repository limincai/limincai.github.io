[{"content":"RabbitMQ æ ¸å¿ƒæ¦‚å¿µåŠæ•´ä½“æ¶æ„ virtual-hostï¼šè™šæ‹Ÿä¸»æœºï¼Œèµ·åˆ°æ•°æ®éš”ç¦»çš„ä½œç”¨ã€‚ publisherï¼šæ¶ˆæ¯å‘é€è€…ã€‚ sconsumerï¼šæ¶ˆæ¯çš„æ¶ˆè´¹è€…ã€‚ queueï¼šé˜Ÿåˆ—ï¼Œå­˜å‚¨æ¶ˆæ¯ã€‚ exchangeï¼šäº¤æ¢æœºï¼Œè´Ÿè´£è·¯ç”±æ¶ˆæ¯ã€‚ Springboot é¡¹ç›®ä½¿ç”¨ RabbitMQ ä¾èµ–å¼•å…¥ pom.xmlï¼š\n1 2 3 4 5 6 7 8 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-amqp\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.fasterxml.jackson.core\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jackson-databind\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; é…ç½® application.yamlï¼š\n1 2 3 4 5 6 7 spring: rabbitmq: host: localhost\tport: 5672\tusername: guest\tpassword: guest\tvirtual-host: /\tconfiguration ç±»é…ç½®åºåˆ—åŒ–ï¼š\n1 2 3 4 5 6 7 8 9 @Configuration public class RabbitMQMessageConfig { @Bean public MessageConverter messageConverter() { return new Jackson2JsonMessageConverter(); } } æµ‹è¯• publisher ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 @SpringBootTest class PublisherApplicationTests { @Resource private RabbitTemplate rabbitTemplate; @Test void testConnection() { // é˜Ÿåˆ—åç§° String queueName = \u0026#34;test.queue\u0026#34;; // æ¶ˆæ¯ String message = \u0026#34;test\u0026#34;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(queueName, message); } } consumer ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 @Component @Slf4j public class TestListener { @RabbitListener(queues = \u0026#34;test.queue\u0026#34;) public void listenTestQueue(String message) { System.out.println(message); } } å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„æ–¹å¼ é…ç½®ç±» ç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 package com.mincai.study.consumer.config; import org.springframework.amqp.core.*; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; /** * @author limincai */ @Configuration public class FanoutConfig { /** * å£°æ˜ Fanout äº¤æ¢æœº */ @Bean public FanoutExchange fanoutExchange1() { // return ExchangeBuilder.fanoutExchange(\u0026#34;exchange.fanout\u0026#34;).build(); return new FanoutExchange(\u0026#34;exchange.fanout\u0026#34;); } /** * å£°æ˜ä¸€ä¸ªé˜Ÿåˆ— */ @Bean public Queue fanoutQueue1() { // return QueueBuilder.durable(\u0026#34;fanout.queue1\u0026#34;).build(); // ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ï¼Œé»˜è®¤æŒä¹…åŒ– return new Queue(\u0026#34;fanout.queue1\u0026#34;); } /** * ç»‘å®šé˜Ÿåˆ—1å’Œäº¤æ¢æœº1 */ @Bean public Binding fanoutBuilding1(Queue fanoutQueue1, FanoutExchange fanoutExchange1) { return BindingBuilder.bind(fanoutQueue1).to(fanoutExchange1); } } æ³¨è§£ åœ¨ç›‘å¬çš„æ–¹æ³•ä¸Šä½¿ç”¨ @RabbitListener æ³¨è§£\nç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Component public class TestListener { @RabbitListener( bindings = @QueueBinding( // ç»‘å®šçš„é˜Ÿåˆ— value = @Queue(value = \u0026#34;fanout.queue1\u0026#34;, durable = \u0026#34;true\u0026#34;), // ç»‘å®šçš„äº¤æ¢æœº exchange = @Exchange(value = \u0026#34;fanout.exchange1\u0026#34;, type = ExchangeTypes.FANOUT), // Binging Key key = \u0026#34;fanoutkey\u0026#34;)) public void listenFanoutQueue1(String message) { System.err.println(\u0026#34;æ¶ˆè´¹è€…1æ”¶åˆ°äº† fanout queue1 çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } } Work Queues è®©å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚\næµ‹è¯• publisher ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 @SpringBootTest class PublisherApplicationTests { @Resource private RabbitTemplate rabbitTemplate; @Test void testWorkQueue() throws InterruptedException { // é˜Ÿåˆ—åç§° String queueName = \u0026#34;work.queue\u0026#34;; for (int i = 0; i \u0026lt; 50; i++) { // æ¶ˆæ¯ String message = \u0026#34;hello,message_\u0026#34; + i; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(queueName, message); Thread.sleep(20); } } } consumer ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 @Component @Slf4j public class TestListener { @RabbitListener(queues = \u0026#34;work.queue\u0026#34;) public void listenWorkQueue1(String message) { System.out.println(\u0026#34;æ¶ˆè´¹è€…1æ”¶åˆ°äº† work queue çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } @RabbitListener(queues = \u0026#34;work.queue\u0026#34;) public void listenWorkQueue2(String message) { System.err.println(\u0026#34;æ¶ˆè´¹è€…2æ”¶åˆ°äº† work queue çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } } æ¶ˆè´¹è€…1å’Œæ¶ˆè´¹è€…2è½®è¯¢æ¶ˆè´¹äº† work.queue ä¸­çš„æ¶ˆæ¯ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼ŒRabbitMQ ä¼šå°†æ¶ˆæ¯è½®è¯¢æŠ•é€’ç»™ç»‘å®šåœ¨é˜Ÿåˆ—ä¸Šçš„æ¯ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚å¯ä»¥ä¿®æ”¹ consumer çš„é…ç½®ï¼Œå°† prefetch è®¾ç½®ä¸º1ï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»æœ€å¤šæŠ•é€’ç»™æ¶ˆè´¹è€…1æ¡æ¶ˆæ¯ï¼š\n1 2 3 4 5 6 spring: rabbitmq: listener: simple: # æ¯æ¬¡åªèƒ½è·å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¤„ç†å®Œæˆæ‰èƒ½è·å–ä¸‹ä¸€æ¡æ¶ˆæ¯ prefetch: 1 Fanout äº¤æ¢æœº Fanout Exchange ä¼šå°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯å¹¿æ’­åˆ°æ¯ä¸€ä¸ªè·Ÿå…¶ç»‘å®šçš„ queueã€‚\næµ‹è¯• publisher ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 @SpringBootTest class PublisherApplicationTests { @Resource private RabbitTemplate rabbitTemplate; @Test void testFanoutExchange() { // äº¤æ¢æœºåç§° String exchangeName = \u0026#34;fanout.exchange\u0026#34;; // æ¶ˆæ¯ String message = \u0026#34;hello,fanout exchange\u0026#34;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(exchangeName, \u0026#34;\u0026#34;, message); } } consumer ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 @Component @Slf4j public class TestListener { @RabbitListener(queues = \u0026#34;fanout.queue1\u0026#34;) public void listenFanoutQueue1(String message) { System.out.println(\u0026#34;æ¶ˆè´¹è€…1æ”¶åˆ°äº† fanout queue1 çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } @RabbitListener(queues = \u0026#34;fanout.queue2\u0026#34;) public void listenFanoutQueue2(String message) { System.out.println(\u0026#34;æ¶ˆè´¹è€…2æ”¶åˆ°äº† fanout queue2 çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } } Direct äº¤æ¢æœº Direct Exchange ä¼šå°†æ”¶åˆ°çš„æ¶ˆæ¯æ ¹æ®è§„åˆ™è·¯ç”±åˆ°æŒ‡å®šçš„ queueã€‚\næ¯ä¸€ä¸ª queue éƒ½ä¸ Exchange ç»‘å®šä¸€ä¸ª Binging Keyã€‚ å‘å¸ƒè€…å‘é€æ¶ˆæ¯æ—¶ï¼ŒæŒ‡å®šæ¶ˆæ¯çš„ Routing Keyã€‚ Exchange å°†æ¶ˆæ¯è·¯ç”±åˆ° Binging Key ä¸æ¶ˆæ¯ Routing Key ä¸€è‡´çš„é˜Ÿåˆ—ã€‚ æµ‹è¯• publisher ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 @SpringBootTest class PublisherApplicationTests { @Resource private RabbitTemplate rabbitTemplate; @Test void testDirectExchange() { // äº¤æ¢æœºåç§° String exchangeName = \u0026#34;direct.exchange\u0026#34;; // routing key String routingKey = \u0026#34;blue\u0026#34;; // æ¶ˆæ¯ String message = \u0026#34;hello,direct exchange\u0026#34;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(exchangeName, routingKey, message); } } consumer ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 @Component @Slf4j public class TestListener { @RabbitListener( bindings = @QueueBinding( value = @Queue( value = \u0026#34;direct.queue1\u0026#34;, durable = \u0026#34;true\u0026#34;), exchange = @Exchange(value = \u0026#34;direct.exchange\u0026#34;, type = \u0026#34;direct\u0026#34;), key = {\u0026#34;red\u0026#34;})) public void listenDirectQueue1(String message) { System.out.println(\u0026#34;æ¶ˆè´¹è€…1æ”¶åˆ°äº† direct queue1 çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } @RabbitListener( bindings = @QueueBinding( value = @Queue( value = \u0026#34;direct.queue2\u0026#34;, durable = \u0026#34;true\u0026#34;), exchange = @Exchange(value = \u0026#34;direct.exchange\u0026#34;, type = \u0026#34;direct\u0026#34;), key = {\u0026#34;yellow\u0026#34;})) public void listenDirectQueue2(String message) { System.err.println(\u0026#34;æ¶ˆè´¹è€…2æ”¶åˆ°äº† direct queue2 çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } } Topic äº¤æ¢æœº Topic Exchange ä¸ Direct Exchange ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº Binging Key å¯ä»¥æœ‰æ›´å¤šè§„åˆ™ã€‚\n#ï¼šä»£æŒ‡0ä¸ªå•è¯ã€‚ *ï¼šä»£æŒ‡1ä¸ªå•è¯ã€‚ æµ‹è¯• publisher ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 @SpringBootTest class PublisherApplicationTests { @Resource private RabbitTemplate rabbitTemplate; @Test void testTopicExchange() { // äº¤æ¢æœºåç§° String exchangeName = \u0026#34;topic.exchange\u0026#34;; // routing key String routingKey = \u0026#34;china.news\u0026#34;; // æ¶ˆæ¯ String message = \u0026#34;hello,topic exchange\u0026#34;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(exchangeName, routingKey, message); } } consumer ç«¯ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Component @Slf4j public class TestListener { @RabbitListener( bindings = @QueueBinding( value = @Queue(value = \u0026#34;topic.queue1\u0026#34;, durable = \u0026#34;true\u0026#34;), exchange = @Exchange(value = \u0026#34;direct.exchange\u0026#34;, type = ExchangeTypes.TOPIC), key = \u0026#34;#.news\u0026#34;)) public void listenTopicQueue1(String message) { System.out.println(\u0026#34;æ¶ˆè´¹è€…1æ”¶åˆ°äº† topic queue1 çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } @RabbitListener( bindings = @QueueBinding( value = @Queue(value = \u0026#34;topic.queue2\u0026#34;, durable = \u0026#34;true\u0026#34;), exchange = @Exchange(value = \u0026#34;direct.exchange\u0026#34;, type = ExchangeTypes.TOPIC), key = \u0026#34;china.#\u0026#34;)) public void listenTopicQueue2(String message) { System.err.println(\u0026#34;æ¶ˆè´¹è€…2æ”¶åˆ°äº† topic queue2 çš„æ¶ˆæ¯ï¼š\u0026#34; + message); } } ","date":"2024-10-30T15:15:00+08:00","image":"https://limincai.github.io/p/rabbitmq-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/rabbitmq-quick-start-cover_hu12896635817044485726.png","permalink":"https://limincai.github.io/p/rabbitmq-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/","title":"RabbitMQ å¿«é€Ÿå…¥é—¨"},{"content":"å…ˆæ›´æ–°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ ç”±äºç½‘ç»œé—®é¢˜ï¼Œè¯·æ±‚é¡ºåºæ— æ³•ä¿è¯ï¼Œå¯èƒ½å‡ºç°å…ˆæ›´æ–°ç¼“å­˜çš„è¯·æ±‚ï¼Œåæ›´æ–°æ•°æ®åº“ï¼Œè€Œåæ›´æ–°ç¼“å­˜çš„è¯·æ±‚åè€Œæ›´æ–°äº†æ•°æ®åº“ï¼Œè¿™æ ·å°±å‡ºç°äº†ç¼“å­˜æ•°æ®ä¸º20ï¼Œæ•°æ®åº“æ•°æ®ä¸º10ï¼Œæ•°æ®ä¸ä¸€è‡´ã€‚\nå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ ","date":"2024-10-20T21:12:22+08:00","image":"https://limincai.github.io/p/redis-%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/redis-consistency-cover_hu4070452447936842256.png","permalink":"https://limincai.github.io/p/redis-%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/","title":"Redis è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜"},{"content":"ç¼“å­˜ç©¿é€ ç¼“å­˜ç©¿é€ï¼šæŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼Œç¼“å­˜ä¸­æ²¡æœ‰ç›¸åº”çš„è®°å½•ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå»è®¿é—®æ•°æ®åº“ï¼Œä½¿æ•°æ®åº“è´Ÿæ‹…åŠ å¤§ã€‚\nè§£å†³æ–¹æ¡ˆ ç¼“å­˜ç©ºæ•°æ®ï¼Œå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå³ä½¿æ˜¯ä¸å­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç¼“å­˜ä¸€ä¸ªæ ‡è¯†ï¼Œä»¥å‡å°‘å¯¹æ•°æ®åº“çš„è¯·æ±‚ã€‚ ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œè¿‡æ»¤åˆ°ä¸å­˜åœ¨çš„è¯·æ±‚ï¼Œé¿å…ç›´æ¥è®¿é—®æ•°æ®åº“ã€‚ è§£å†³æ–¹æ¡ˆå¯¹æ¯” è§£å†³æ–¹æ¡ˆ ä¼˜ç‚¹ ç¼ºç‚¹ ç¼“å­˜ç©ºå¯¹è±¡ å®ç°ç®€å•ï¼Œæ–¹ä¾¿ç»´æŠ¤ é¢å¤–çš„å†…å­˜æ¶ˆè€—å¯èƒ½é€ æˆçŸ­æœŸçš„ä¸ä¸€è‡´ å¸ƒéš†è¿‡æ»¤å™¨ å†…å­˜å ç”¨è¾ƒå°ï¼Œæ²¡æœ‰å¤šä½™ key å®ç°å¤æ‚å­˜åœ¨è¯¯åˆ¤å¯èƒ½ ç¼“å­˜ç©ºå¯¹è±¡ Java å®ç° æµç¨‹å›¾ï¼š\nJava ä¸šåŠ¡ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 /** * @author limincai */ @Service public class GoodServiceImpl extends ServiceImpl\u0026lt;GoodMapper, Good\u0026gt; implements GoodService { @Resource private StringRedisTemplate stringRedisTemplate; @Override public Good getGood(Integer goodId) { String key = \u0026#34;good:\u0026#34; + goodId; // 1.ä» redis ä¸­æŸ¥è¯¢å•†å“ç¼“å­˜ String goodJson = stringRedisTemplate.opsForValue().get(key); // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨ if (StrUtil.isNotBlank(goodJson)) { // å­˜åœ¨ç›´æ¥è¿”å› return JSONUtil.toBean(goodJson, Good.class); } // 3.åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼ if (goodJson != null) { // æ˜¯åˆ™ç›´æ¥è¿”å›ç©ºå€¼ return null; } // 4.ä¸å­˜åœ¨ï¼ŒæŸ¥è¯¢æ•°æ®åº“ Good good = getById(goodId); // 5.æ•°æ®åº“ä¸­ä¸å­˜åœ¨ï¼Œåˆ™å°†ç©ºå€¼å†™å…¥ redis å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ if (good == null) { stringRedisTemplate.opsForValue().set(key, \u0026#34;\u0026#34;, 30, TimeUnit.SECONDS); return null; } // 6.æ•°æ®åº“ä¸­å­˜åœ¨ï¼Œåˆ™é‡å»ºç¼“å­˜ stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(good), 30, TimeUnit.SECONDS); return good; } } ç¼“å­˜å‡»ç©¿ ç¼“å­˜å‡»ç©¿ï¼šæŒ‡æŸä¸ªçƒ­ç‚¹æ•°æ®åœ¨ç¼“å­˜ä¸­å¤±æ•ˆï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚ç›´æ¥è®¿é—®æ•°æ®åº“ã€‚æ­¤æ—¶ï¼Œç”±äºç¬é—´çš„é«˜å¹¶å‘ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®åº“å´©æºƒã€‚\nè§£å†³æ–¹æ¡ˆ ä½¿ç”¨äº’æ–¥é”ï¼Œç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªè¯·æ±‚å¯ä»¥å»æ•°æ®åº“æŸ¥è¯¢å¹¶æ›´æ–°ç¼“å­˜ã€‚å½“ç¼“å­˜æœªå‘½ä¸­æ—¶ï¼Œå½“å‰çº¿ç¨‹è·å¾—é”å¹¶å»æŸ¥è¯¢æ•°æ®åº“é‡æ–°ç¼“å­˜æ•°æ®ã€‚ç¼ºç‚¹æ˜¯æ€§èƒ½è¾ƒå·®ï¼Œå½“å‰çº¿ç¨‹æ‹¿åˆ°äº’æ–¥é”æ—¶ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…ã€‚ é€»è¾‘è¿‡æœŸï¼Œçƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸã€‚è‹¥å½“å‰çº¿ç¨‹å‘ç°æ•°æ®é€»è¾‘æ—¶é—´å·²è¿‡æœŸï¼Œå°±å»è·å¾—äº’æ–¥é”ï¼Œå¹¶å¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹å»æŸ¥è¯¢æ•°æ®åº“é‡æ–°å»ºç«‹ç¼“å­˜ï¼Œå¹¶è¿”å›å·²è¿‡æœŸçš„æ•°æ®ã€‚å½“å…¶ä»–çº¿ç¨‹è·å–äº’æ–¥é”å¤±è´¥æ—¶ï¼Œç›´æ¥è¿”å›è¿‡æœŸæ•°æ®ã€‚å½“ç¼“å­˜é‡æ–°å»ºç«‹æ—¶ï¼Œæ­¤æ—¶é‡Šæ”¾é”ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç›´æ¥å‘½ä¸­ç¼“å­˜ã€‚ è§£å†³æ–¹æ¡ˆå¯¹æ¯” è§£å†³æ–¹æ¡ˆ ä¼˜ç‚¹ ç¼ºç‚¹ äº’æ–¥é” æ²¡æœ‰é¢å¤–å†…å­˜æ¶ˆè€—ä¿è¯ä¸€è‡´æ€§å®ç°ç®€å• æ²¡æœ‰é¢å¤–å†…å­˜æ¶ˆè€—å¯èƒ½æœ‰æ­»é”é£é™© é€»è¾‘è¿‡æœŸ çº¿ç¨‹æ— éœ€ç­‰å¾… ä¸ä¿è¯ä¸€è‡´æ€§æœ‰é¢å¤–å†…å­˜æ¶ˆè€—å®ç°å¤æ‚ äº’æ–¥é” Java å®ç° æµç¨‹å›¾ï¼š\nJava ä¸šåŠ¡ä»£ç ï¼š\nå…¶ä¸­ tryLock() å’Œ unLock() å¯ä»¥ä½¿ç”¨ ReentrantLock å¯¹è±¡çš„ tryLock() å’Œ unLock() æ–¹æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 /** * @author limincai */ @Service public class GoodServiceImpl extends ServiceImpl\u0026lt;GoodMapper, Good\u0026gt; implements GoodService { private Lock lock = new ReentrantLock(); @Resource private StringRedisTemplate stringRedisTemplate; @Override public Good getGood(Integer goodId) { String key = \u0026#34;good:\u0026#34; + goodId; // 1.ä» redis ä¸­æŸ¥è¯¢å•†å“ç¼“å­˜ String goodJson = stringRedisTemplate.opsForValue().get(key); // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨ if (StrUtil.isNotBlank(goodJson)) { // å¦‚æœå­˜åœ¨ç›´æ¥è¿”å› return JSONUtil.toBean(goodJson, Good.class); } // 3.ä¸å­˜åœ¨å®ç°ç¼“å­˜é‡å»º // 3.1.è·å–äº’æ–¥é” Good good; String lockKey = \u0026#34;lock:good:\u0026#34; + goodId; try { if (tryLock(lockKey)) { // 3.2.è·å–æˆåŠŸï¼ŒæŸ¥è¯¢æ•°æ®åº“æ›´æ–°ç¼“å­˜ good = getById(goodId); // æ¨¡æ‹Ÿé‡å»ºçš„å»¶æ—¶ Thread.sleep(200); if (good == null) { // 3.2.1. æ•°æ®åº“ä¸­ä¸å­˜åœ¨ï¼Œåœ¨ redis ä¸­å­˜å…¥ç©ºå€¼å¹¶è¿”å›ç©º stringRedisTemplate.opsForValue().set(key, \u0026#34;\u0026#34;, 30, TimeUnit.SECONDS); return null; } else { // 3.2.2. æ•°æ®åº“ä¸­å­˜åœ¨æ•°æ®æ›´æ–°ç¼“å­˜ stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(good)); } } else { // 3.3.è·å–å¤±è´¥ï¼Œä¼‘çœ ä¸€æ®µæ—¶é—´é‡æ–° Thread.sleep(50); return getGood(goodId); } } catch (InterruptedException e) { throw new RuntimeException(e); } finally { // 4.é‡Šæ”¾äº’æ–¥é” unLock(lockKey); } return good; } /** * è·å–é” * * @param key redis key * @return æ˜¯å¦è·å–æˆåŠŸ */ private boolean tryLock(String key) { // å½“æˆåŠŸè®¾ç½®å€¼æ—¶ï¼Œè¯´æ˜å¯ä»¥è·å¾—é”ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false // ç»™é”è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸï¼Œé˜²æ­¢å‡ºç°æ­»é” Boolean flag = stringRedisTemplate.opsForValue().setIfAbsent(key, \u0026#34;1\u0026#34;, 50, TimeUnit.SECONDS); return BooleanUtil.isTrue(flag); } /** * é‡Šæ”¾é” * * @param key redis key */ private void unLock(String key) { stringRedisTemplate.delete(key); } } é€»è¾‘è¿‡æœŸ Java å®ç° æµç¨‹å›¾ï¼š\né¦–å…ˆå…ˆæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå±æ€§ä½œä¸ºè¿‡æœŸæ—¶é—´ï¼Œå¦å¤–ä¸€ä¸ªå±æ€§ä¸ºæ•°æ®å¯¹è±¡ï¼Œè¿™æ ·ä¸éœ€è¦ä¿®æ”¹åŸæ¥ä»£ç å°±èƒ½è®©æ•°æ®å¯¹è±¡æ‹¥æœ‰é€»è¾‘è¿‡æœŸæ—¶é—´å±æ€§ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /** * @author limincai */ @Data @Getter @Setter public class RedisData { /** * é€»è¾‘è¿‡æœŸæ—¶é—´ */ private LocalDateTime expireTime; /** * æ•°æ®å¯¹è±¡ */ private Object data; } Java ä¸šåŠ¡ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 /** * @author limincai */ @Service public class GoodServiceImpl extends ServiceImpl\u0026lt;GoodMapper, Good\u0026gt; implements GoodService { /** * ç¼“å­˜é‡å»ºçº¿ç¨‹æ±  */ private static final ExecutorService CACHE_REBUILD_EXECUTOR = Executors.newFixedThreadPool(10); @Resource private StringRedisTemplate stringRedisTemplate; @Override public Good getGood(Integer goodId) { String key = \u0026#34;good:\u0026#34; + goodId; // 1.ä» redis ä¸­æŸ¥è¯¢å•†å“ç¼“å­˜ String goodJson = stringRedisTemplate.opsForValue().get(key); // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨ if (StrUtil.isNotBlank(goodJson)) { // å¦‚æœä¸å­˜åœ¨ç›´æ¥è¿”å›ç©º return null; } // 3.å­˜åœ¨ RedisData redisData = JSONUtil.toBean(goodJson, RedisData.class); Good good = JSONUtil.toBean((JSONObject) redisData.getData(), Good.class); // 4.åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸ if (redisData.getExpireTime().isAfter(LocalDateTime.now())) { // æœªè¿‡æœŸåˆ™ç›´æ¥è¿”å›è¿‡æœŸæ•°æ® return good; } // 5.è¿‡æœŸåˆ™è™šç¼“å­˜é‡æ„ // 5.1.è·å–äº’æ–¥é” String lockKey = \u0026#34;lock:good:\u0026#34; + goodId; try { if (tryLock(lockKey)) { // 5.2.è·å–æˆåŠŸï¼Œæ–°å»ºä¸€ä¸ªç¼“å­˜æŸ¥è¯¢æ•°æ®åº“æ›´æ–°ç¼“å­˜ CACHE_REBUILD_EXECUTOR.submit(() -\u0026gt; { saveGoodToRedis(goodId, 30L); }); good = getById(goodId); } } catch (Exception e) { throw new RuntimeException(e); } finally { // 5.4.é‡Šæ”¾äº’æ–¥é” unLock(lockKey); } // 5.5.ç¼“å­˜å¤±è´¥ç›´æ¥è¿”å›è¿‡æœŸæ•°æ® return good; } /** * æŠŠå°è£…é€»è¾‘è¿‡æœŸæ—¶é—´çš„æ•°æ®å¯¹è±¡åˆ° redis * * @param goodId å•†å“ id * @param expireSeconds è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ */ public void saveGoodToRedis(Integer goodId, Long expireSeconds) { // 1.æŸ¥è¯¢åº—é“ºæ•°æ® Good good = getById(goodId); // 2.å°è£…é€»è¾‘è¿‡æœŸæ—¶é—´ RedisData redisData = new RedisData(); redisData.setExpireTime(LocalDateTime.now().plusSeconds(expireSeconds)); redisData.setData(good); // 3.å†™å…¥åˆ° redis stringRedisTemplate.opsForValue().set(\u0026#34;good:\u0026#34; + goodId, JSONUtil.toJsonStr(redisData)); } /** * è·å–é” * * @param key redis key * @return æ˜¯å¦è·å–æˆåŠŸ */ private boolean tryLock(String key) { // å½“æˆåŠŸè®¾ç½®å€¼æ—¶ï¼Œè¯´æ˜å¯ä»¥è·å¾—é”ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false // ç»™é”è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸï¼Œé˜²æ­¢å‡ºç°æ­»é” Boolean flag = stringRedisTemplate.opsForValue().setIfAbsent(key, \u0026#34;1\u0026#34;, 50, TimeUnit.SECONDS); return BooleanUtil.isTrue(flag); } /** * é‡Šæ”¾é” * * @param key redis key */ private void unLock(String key) { stringRedisTemplate.delete(key); } } ç¼“å­˜é›ªå´© ç¼“å­˜é›ªå´©ï¼šæŒ‡å¤šä¸ªç¼“å­˜æ•°æ®ä¸­åŒä¸€æ—¶é—´è¿‡æœŸæˆ–è€… Redis æœåŠ¡å®•æœºï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚è®¿é—®æ•°æ®åº“ï¼Œä»è€Œé€ æˆæ•°æ®åº“ç¬é—´è´Ÿè½½æ¿€å¢ã€‚\nè§£å†³æ–¹æ¡ˆ é‡‡ç”¨éšæœºè¿‡æœŸæ—¶é—´ç­–ç•¥ï¼Œé¿å…å¤šä¸ªæ•°æ®åŒæ—¶è¿‡æœŸã€‚ ä½¿ç”¨åŒç¼“å­˜ç­–ç•¥ï¼Œå°†æ•°æ®åŒæ—¶å­˜å‚¨åœ¨ä¸¤å±‚ç¼“å­˜ä¸­ï¼Œå‡å°‘æ•°æ®åº“çš„ç›´æ¥è¯·æ±‚ã€‚ åˆ©ç”¨ Redis é›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§ã€‚ ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥ã€‚ éšæœºè¿‡æœŸæ—¶é—´ Java å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 /** * @author limincai */ @Service public class GoodServiceImpl extends ServiceImpl\u0026lt;GoodMapper, Good\u0026gt; implements GoodService { @Resource private StringRedisTemplate stringRedisTemplate; @Override public Good getGood(Integer goodId) { String key = \u0026#34;good:\u0026#34; + goodId; // 1.ä» redis ä¸­æŸ¥è¯¢å•†å“ç¼“å­˜ String goodJson = stringRedisTemplate.opsForValue().get(key); // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨ if (StrUtil.isNotBlank(goodJson)) { // å­˜åœ¨ç›´æ¥è¿”å› return JSONUtil.toBean(goodJson, Good.class); } // 3.ä¸å­˜åœ¨æŸ¥è¯¢æ•°æ®åº“ Good good = getById(goodId); // 4.æ•°æ®åº“ä¸­ä¸å­˜åœ¨ï¼Œè¿”å›ç©º if (good == null) { return null; } // 5.æ•°æ®åº“ä¸­å­˜åœ¨ï¼Œé‡å»ºç¼“å­˜,å¹¶ç»™è¿‡æœŸæ—¶é—´é¢å¤–æ·»åŠ éšæœºå€¼é˜²æ­¢åŒæ—¶è¿‡æœŸ // ç”Ÿæˆ 5 - 10 çš„éšæœºæ•°ï¼Œä½œä¸ºéšæœºçš„è¿‡æœŸæ—¶é—´ Random rand = new Random(); int randomTTL = rand.nextInt((10 - 5) + 1) + 5; stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(good), 30 + randomTTL, TimeUnit.SECONDS); return good; } } ","date":"2024-10-13T21:47:45+08:00","image":"https://limincai.github.io/p/redis-%E8%A7%A3%E5%86%B3%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E5%92%8C%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/redis-hcjc-cover_hu13619607647227089532.png","permalink":"https://limincai.github.io/p/redis-%E8%A7%A3%E5%86%B3%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E5%92%8C%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/","title":"Redis è§£å†³ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜é›ªå´©"},{"content":"æ–‡æ¡£å‚è€ƒï¼šRedis å®˜æ–¹æ–‡æ¡£\nSpringBoot é¡¹ç›®ä½¿ç”¨ Redis ä¾èµ–å¼•å…¥ åœ¨ Springboot é¡¹ç›®ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!-- Redis ä¾èµ– --\u0026gt; \u0026lt;dependency\u0026gt; groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-data-redis\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- Json åºåˆ—åŒ–ä¾èµ– --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.fasterxml.jackson.datatype\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jackson-datatype-jsr310\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.13.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; é…ç½® Redis æ–°å»ºä¸€ä¸ª RedisConfig ç±»ç”¨äº Redis çš„é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 /** * Redis é…ç½®ç±» * * @author limincai */ @Configuration public class RedisConfig { @Bean public RedisTemplate\u0026lt;String, Object\u0026gt; redisTemplate(RedisConnectionFactory connection) { RedisTemplate\u0026lt;String, Object\u0026gt; redisTemplate = new RedisTemplate\u0026lt;\u0026gt;(); redisTemplate.setConnectionFactory(connection); // è®¾ç½®é”®åºåˆ—åŒ–å™¨ä¸º StringRedisSerializerï¼Œæ‰€æœ‰çš„é”®ä¼šè¢«åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸² redisTemplate.setKeySerializer(new StringRedisSerializer()); // è®¾ç½®å€¼åºåˆ—åŒ–å™¨ä¸º GenericJackson2JsonRedisSerializerï¼Œæ‰€æœ‰çš„é”®ä¼šè¢«åºåˆ—åŒ–ä¸º Json redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer()); redisTemplate.setHashKeySerializer(new StringRedisSerializer()); redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer()); redisTemplate.afterPropertiesSet(); return redisTemplate; } } é…ç½® application.yaml 1 2 3 4 5 6 7 8 9 10 11 12 spring: redis: host: localhost # RedisæœåŠ¡å™¨çš„ä¸»æœºåï¼Œé»˜è®¤ localhost port: 6379 # RedisæœåŠ¡å™¨çš„ç«¯å£å·ï¼Œé»˜è®¤ 6379 password: # RedisæœåŠ¡å™¨çš„å¯†ç ï¼Œå¦‚æœæ²¡æœ‰å¯†ç åˆ™ç•™ç©ºï¼Œé»˜è®¤ä¸ºç©º timeout: 3000 # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰ lettuce: pool: max-active: 8 # æœ€å¤§è¿æ¥æ•° max-wait: -1 # æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œ-1è¡¨ç¤ºä¸é™åˆ¶ max-idle: 8 # æœ€å¤§ç©ºé—²è¿æ¥æ•° min-idle: 1 # æœ€å°ç©ºé—²è¿æ¥æ•° åŸºæœ¬æ•°æ®ç»“æ„ String String æ˜¯ Redis ä¸­æœ€ç®€å•å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®æ¯”å¦‚å­—ç¬¦ä¸²ã€æ•´å½¢ã€æµ®ç‚¹ã€åºåˆ—åŒ–åçš„å¯¹è±¡ç­‰ã€‚\nåº”ç”¨åœºæ™¯ ç¼“å­˜ï¼šå¯ä»¥ä½œä¸ºç¼“å­˜æ•°æ®åº“ä½¿ç”¨ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ï¼Œå‡å°‘å¯¹æ•°æ®åº“è®¿é—®çš„å‹åŠ›ã€‚ ä¼šè¯ï¼šå¯ä»¥å­˜å‚¨ seesionã€tokenï¼Œç­‰ä¼šè¯æ•°æ®ï¼Œå¯ä»¥ç”¨åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚ è®¡æ•°å™¨ï¼šRedis çš„ incr/decr å‘½ä»¤å¯ä»¥ç”¨äºå®ç°è®¡æ•°å™¨åŠŸèƒ½ã€‚å¯ä»¥å°†è®¡æ•°å™¨å­˜å‚¨ä¸º String ç±»å‹ï¼Œæ¯æ¬¡æ›´æ–°æ—¶é€šè¿‡ incr/decr å‘½ä»¤è¿›è¡Œè‡ªå¢æˆ–è‡ªå‡æ“ä½œã€‚ åˆ†å¸ƒå¼é”ï¼šé€šè¿‡ SETNX å‘½ä»¤å¯ä»¥å®ç°ä¸€ä¸ªå…·æœ‰è¿‡æœŸæ—¶é—´çš„åˆ†å¸ƒå¼é”ã€‚ åŸºæœ¬æ“ä½œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 # è®¾ç½®æŒ‡å®š key å€¼ã€‚ SET key value # è·å–æŒ‡å®š key å€¼ã€‚ GET key # åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨ã€‚ EXSITS key # åˆ é™¤ key DEL key # æ‰¹é‡è®¾ç½® key å€¼ MSET key1 value1 [key2 value2 ...] # æ‰¹é‡åˆ é™¤ key å€¼ MGET key1 [ key2 ...] # å°† key ä¸­å­˜å‚¨çš„æ•°å€¼åŠ 1ã€‚ INCR key # å°† key ä¸­å­˜å‚¨çš„æ•°å€¼å‡1ã€‚ DECR key # ç»™ key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ EXPIRE key seconds # è®¾ç½® key å€¼å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœ key å­˜åœ¨ä¸åšä»»ä½•æ“ä½œå¹¶è¿”å›0ï¼Œå¦åˆ™è¿”å›1ã€‚ SETNX key value [EX seconds | PX milliseconds] # æŸ¥çœ‹å‰©ä½™è¿‡æœŸæ—¶é—´ã€‚ TTL key Java ä»£ç æµ‹è¯• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 @Test void testString() { // è®¾ç½®æŒ‡å®š key å€¼ redisTemplate.opsForValue().set(\u0026#34;string1\u0026#34;, \u0026#34;value1\u0026#34;); // è·å–æŒ‡å®š key å€¼ System.out.println(redisTemplate.opsForValue().get(\u0026#34;string1\u0026#34;)); // åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨ System.out.println(redisTemplate.opsForValue().getOperations().hasKey(\u0026#34;string1\u0026#34;)); // å¾—åˆ°å€¼ååˆ é™¤ key System.out.println(redisTemplate.opsForValue().getAndDelete(\u0026#34;string1\u0026#34;)); // æ‰¹é‡è®¾ç½® key å€¼ HashMap\u0026lt;String, Object\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;string1\u0026#34;, \u0026#34;value1\u0026#34;); map.put(\u0026#34;string2\u0026#34;, \u0026#34;value2\u0026#34;); redisTemplate.opsForValue().multiSet(map); // æ‰¹é‡åˆ é™¤ key å€¼ HashSet\u0026lt;String\u0026gt; set = new HashSet\u0026lt;\u0026gt;(); set.add(\u0026#34;string1\u0026#34;); set.add(\u0026#34;string2\u0026#34;); redisTemplate.opsForValue().getOperations().delete(set); // å°† key ä¸­å­˜å‚¨çš„æ•°å€¼åŠ 1å¹¶è¿”å›ä¿®æ”¹åçš„å€¼ redisTemplate.opsForValue().set(\u0026#34;num1\u0026#34;, 1); System.out.println(redisTemplate.opsForValue().increment(\u0026#34;num1\u0026#34;)); // å°† key ä¸­å­˜å‚¨çš„æ•°å€¼å‡1å¹¶è¿”å›ä¿®æ”¹åçš„å€¼ System.out.println(redisTemplate.opsForValue().decrement(\u0026#34;value1\u0026#34;)); // ç»™ key è®¾ç½®è¿‡æœŸæ—¶é—´ redisTemplate.opsForValue().set(\u0026#34;string1\u0026#34;, \u0026#34;value1\u0026#34;); redisTemplate.opsForValue().getAndExpire(\u0026#34;string1\u0026#34;, 1000, TimeUnit.SECONDS); // è®¾ç½® key å€¼å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœ key å­˜åœ¨ä¸åšä»»ä½•æ“ä½œå¹¶è¿”å› falseï¼Œå¦åˆ™è¿”å› true System.out.println(redisTemplate.opsForValue().setIfAbsent(\u0026#34;string1\u0026#34;, \u0026#34;value1\u0026#34;)); System.out.println(redisTemplate.opsForValue().setIfAbsent(\u0026#34;string2\u0026#34;, \u0026#34;value2\u0026#34;, 1000, TimeUnit.SECONDS)); // æŸ¥çœ‹å‰©ä½™è¿‡æœŸæ—¶é—´ System.out.println(redisTemplate.opsForValue().getOperations().getExpire(\u0026#34;string2\u0026#34;)); } List List æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚\nåº”ç”¨åœºæ™¯ æœ€æ¶ˆæ¯æ’è¡Œæ¦œï¼šå¯ä»¥ä½¿ç”¨ Redis åˆ—è¡¨æ¥å­˜å‚¨æœ€æ–°çš„æ¶ˆæ¯ã€‚æ¯æ¬¡æœ‰æ–°çš„æ¶ˆæ¯åˆ°è¾¾æ—¶ï¼Œå°†å…¶æ’å…¥åˆ°åˆ—è¡¨çš„å¤´ï¼Œå½“åˆ—è¡¨çš„é•¿åº¦è¶…è¿‡ä¸€å®šé™åˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨LTRIMå‘½ä»¤è¿›è¡Œä¿®å‰ªï¼Œä»¥ä¿æŒåˆ—è¡¨çš„é•¿åº¦ã€‚ å®æ—¶æ¶ˆæ¯è®°å½•ï¼šå¯ä»¥ä½¿ç”¨ Redis åˆ—è¡¨æ¥ä¿å­˜å®æ—¶äº§ç”Ÿçš„æ¶ˆæ¯è®°å½•ã€‚æ¯å½“æœ‰æ–°çš„æ¶ˆæ¯äº§ç”Ÿæ—¶ï¼Œå°†å…¶æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨ï¼Œä»¥ä¾¿å¯ä»¥è¿½æº¯æœ€è¿‘çš„ä¸€å®šæ•°é‡çš„æ¶ˆæ¯è®°å½•ã€‚ æ’è¡Œæ¦œ/è®¡åˆ†ç³»ç»Ÿï¼šå¯ä»¥ä½¿ç”¨ Redis åˆ—è¡¨æ¥å®ç°æ’è¡Œæ¦œæˆ–è®¡åˆ†ç³»ç»Ÿã€‚æ¯ä¸ªå…ƒç´ å¯ä»¥åŒ…å«ä¸€ä¸ªåˆ†æ•°ï¼Œé€šè¿‡å¯¹å…ƒæŒ‰ç…§åˆ†æ•°è¿›è¡Œæ’åºï¼Œå¯ä»¥è·å–åˆ°æ’è¡Œæ¦œä¸­çš„å‰å‡ åæˆ–æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚ åŸºæœ¬æ“ä½œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 # å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å·¦ä¾§ï¼Œè¿”å›æ’å…¥ååˆ—è¡¨çš„é•¿åº¦ã€‚ LPUSH key value [value ...] # å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å³ä¾§ï¼Œè¿”å›æ’å…¥ååˆ—è¡¨çš„é•¿åº¦ã€‚ RPUSH key value [value ...] #ç§»é™¤è¿”å›åˆ—è¡¨çš„å·¦ä¾§ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ LPOP key # ç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„å³ä¾§ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ RPOP key # è¿”å›åˆ—è¡¨çš„é•¿åº¦ã€‚ LLEN key # è·å–åˆ—è¡¨ä¸­æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚ LRANGE key start stop # è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚ LINDEX key index # è®¾ç½®åˆ—è¡¨ä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ çš„å€¼ã€‚ LSET key index value # ç§»é™¤åˆ—è¡¨ä¸­çš„æŒ‡å®šå…ƒç´ ã€‚ LREM key count value # ä¿®å‰ªåˆ—è¡¨ï¼Œåªä¿ç•™æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚ LTRIM key start stop Java ä»£ç æµ‹è¯• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 @Test void testList() { // å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å·¦ä¾§ï¼Œè¿”å›æ’å…¥ååˆ—è¡¨çš„é•¿åº¦ã€‚ redisTemplate.opsForList().leftPushAll(\u0026#34;mylist\u0026#34;, \u0026#34;value1\u0026#34;, \u0026#34;value2\u0026#34;, \u0026#34;value3\u0026#34;); // å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å³ä¾§ï¼Œè¿”å›æ’å…¥ååˆ—è¡¨çš„é•¿åº¦ã€‚ redisTemplate.opsForList().rightPushAll(\u0026#34;mylist\u0026#34;, \u0026#34;value4\u0026#34;, \u0026#34;value5\u0026#34;, \u0026#34;value6\u0026#34;); // ç§»é™¤è¿”å›åˆ—è¡¨çš„å·¦ä¾§ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ System.out.println(redisTemplate.opsForList().leftPop(\u0026#34;mylist\u0026#34;)); // ç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„å³ä¾§ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ System.out.println(redisTemplate.opsForList().rightPop(\u0026#34;mylist\u0026#34;)); // è¿”å›åˆ—è¡¨çš„é•¿åº¦ã€‚ System.out.println(redisTemplate.opsForList().size(\u0026#34;mylist\u0026#34;)); // è·å–åˆ—è¡¨ä¸­æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚ System.out.println(redisTemplate.opsForList().range(\u0026#34;mylist\u0026#34;, 2, 3)); // è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚ System.out.println(redisTemplate.opsForList().index(\u0026#34;mylist\u0026#34;, 3)); // è®¾ç½®åˆ—è¡¨ä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ çš„å€¼ã€‚ redisTemplate.opsForList().set(\u0026#34;mylist\u0026#34;, 2, \u0026#34;value3\u0026#34;); // ç§»é™¤åˆ—è¡¨ä¸­çš„æŒ‡å®šå…ƒç´ ã€‚ redisTemplate.opsForList().remove(\u0026#34;mylist\u0026#34;, 1, \u0026#34;value1\u0026#34;); // ä¿®å‰ªåˆ—è¡¨ï¼Œåªä¿ç•™æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚ redisTemplate.opsForList().trim(\u0026#34;mylist\u0026#34;, 1, 3); } Hash Hash æ˜¯ä¸€ä¸ª String ç±»å‹çš„é”®å€¼å¯¹ã€‚\nåº”ç”¨åœºæ™¯ ç¼“å­˜å¯¹è±¡ï¼šå¯ä»¥å°†å¯¹è±¡çš„å­—æ®µå’Œå±æ€§å­˜å‚¨åœ¨Redisçš„Hashä¸­ï¼Œä»¥ä¾¿å¿«é€Ÿåœ°è¯»å–å’Œæ›´æ–°ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨ä¸€ä¸ªHashä¸­ï¼Œæ¯ä¸ªç”¨æˆ·çš„å­—æ®µå¯ä»¥æ˜¯ç”¨æˆ·IDã€ç”¨æˆ·åã€å¹´é¾„ç­‰ã€‚è¿™æ ·ï¼Œåœ¨éœ€è¦è¯»å–æˆ–ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç”¨æˆ·IDæ¥è·å–æˆ–æ›´æ–°ç›¸åº”çš„å­—æ®µã€‚ è®¡æ•°å™¨ï¼šå¯ä»¥ä½¿ç”¨Hashæ¥å®ç°è®¡æ•°å™¨åŠŸèƒ½ã€‚é€šè¿‡å°†è®¡æ•°å™¨çš„åç§°ä½œä¸ºHashçš„é”®åï¼Œå°†è®¡æ•°å€¼ä½œä¸ºé”®å€¼å­˜å‚¨åœ¨Hashä¸­ã€‚ç„¶åå¯ä»¥ä½¿ç”¨Redisæä¾›çš„åŸå­æ“ä½œå¯¹è®¡æ•°å™¨è¿›è¡Œå¢å‡æ“ä½œï¼Œå¦‚HINCRBYå‘½ä»¤ã€‚ å®æ—¶æ’è¡Œæ¦œï¼šå¯ä»¥ä½¿ç”¨Hashæ¥å®ç°å®æ—¶æ’è¡Œæ¦œåŠŸèƒ½ã€‚å°†ç”¨æˆ·IDä½œä¸ºHashçš„é”®åï¼Œå°†ç”¨æˆ·çš„åˆ†æ•°ä½œä¸ºé”®å€¼å­˜å‚¨åœ¨Hashä¸­ã€‚é€šè¿‡æ›´æ–°ç”¨æˆ·çš„åˆ†æ•°æ¥å®ç°æ’è¡Œæ¦œå®æ—¶æ›´æ–°ï¼Œå¹¶ä½¿ç”¨Redisæä¾›çš„ZSETæ•°æ®ç»“æ„è¿›è¡Œæ’åçš„è®¡ç®—ã€‚ åŸºæœ¬æ“ä½œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # è®¾ç½® Hash ä¸­æŒ‡å®šå­—æ®µçš„å€¼ã€‚ HSET key field1 value1 [field2 value2...] # è·å– Hash ä¸­æŒ‡å®šå­—æ®µçš„å€¼ HGET key field # è®¾ç½® Hash ä¸­å¤šä¸ªå­—æ®µçš„å€¼ã€‚ HMSET key field1 value1 [field2 value2...] # è·å– Hash ä¸­å¤šä¸ªå­—æ®µçš„å€¼ã€‚ HMGET key field1 [field2...] # è·å– Hash ä¸­æ‰€æœ‰å­—æ®µå’Œå€¼ã€‚ HGETALL key # åˆ é™¤ Hash ä¸­çš„æŒ‡å®šå­—æ®µã€‚ HDEL key field # åˆ¤æ–­ Hash ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šå­—æ®µã€‚ HEXISTS key field # è·å– Hash ä¸­æ‰€æœ‰å€¼ HVALS key Java ä»£ç æµ‹è¯• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 @Test void testHash() { // è®¾ç½® Hash ä¸­æŒ‡å®šå­—æ®µçš„å€¼ã€‚ redisTemplate.opsForHash().put(\u0026#34;myhash\u0026#34;, \u0026#34;field1\u0026#34;, \u0026#34;value1\u0026#34;); // è·å– Hash ä¸­æŒ‡å®šå­—æ®µçš„å€¼ System.out.println(redisTemplate.opsForHash().get(\u0026#34;myhash\u0026#34;, \u0026#34;field1\u0026#34;)); // è®¾ç½® Hash ä¸­å¤šä¸ªå­—æ®µçš„å€¼ã€‚ HashMap\u0026lt;String, Object\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;field2\u0026#34;, \u0026#34;value2\u0026#34;); map.put(\u0026#34;field3\u0026#34;, \u0026#34;value3\u0026#34;); redisTemplate.opsForHash().putAll(\u0026#34;myhash\u0026#34;, map); // è·å– Hash ä¸­å¤šä¸ªå­—æ®µçš„å€¼ã€‚ HashSet\u0026lt;Object\u0026gt; set = new HashSet\u0026lt;\u0026gt;(); set.add(\u0026#34;field1\u0026#34;); set.add(\u0026#34;field2\u0026#34;); System.out.println(redisTemplate.opsForHash().multiGet(\u0026#34;myhash\u0026#34;, set)); // è·å– Hash ä¸­æ‰€æœ‰å­—æ®µå’Œå€¼ã€‚ System.out.println(redisTemplate.opsForHash().entries(\u0026#34;myhash\u0026#34;)); // åˆ é™¤ Hash ä¸­çš„æŒ‡å®šå­—æ®µã€‚ redisTemplate.opsForHash().delete(\u0026#34;myhash\u0026#34;, \u0026#34;field1\u0026#34;); // åˆ¤æ–­ Hash ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šå­—æ®µã€‚ System.out.println(redisTemplate.opsForHash().hasKey(\u0026#34;myhash\u0026#34;,\u0026#34;field2\u0026#34;)); // è·å– Hash ä¸­æ‰€æœ‰å€¼ System.out.println(redisTemplate.opsForHash().values(\u0026#34;myhash\u0026#34;)); } Set Set æ˜¯ä¸€ç§æ— åºé›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ å”¯ä¸€ï¼Œç±»ä¼¼äº Java ä¸­çš„ HashSet\nåº”ç”¨åœºæ™¯ æŠ½å¥–å’Œæ’è¡Œæ¦œï¼šSetå¯ä»¥ç”¨äºå®ç°æŠ½å¥–åŠŸèƒ½å’Œæ’è¡Œæ¦œåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒæŠ½å¥–æ´»åŠ¨çš„å‚ä¸è€…å¯ä»¥å­˜å‚¨åœ¨Setï¼Œæ¯æ¬¡æŠ½å¥–æ—¶ä»Setä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç”¨æˆ·ï¼›å¦å¤–ï¼Œå°†ç”¨æˆ·çš„å¾—åˆ†ã€ç‚¹å‡»é‡æˆ–å…¶ä»–æŒ‡æ ‡å­˜å‚¨åœ¨Setä¸­ï¼Œå¯ä»¥æ®æƒé‡æ’åºæ¥ç”Ÿæˆæ’è¡Œæ¦œã€‚ å¥½å‹å…³ç³»ï¼šSetå¯ä»¥ç”¨äºå­˜å‚¨ç”¨æˆ·çš„å¥½å‹å…³ç³»ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªSetï¼Œä¿å­˜äº†è¯¥ç”¨æˆ·çš„å¥½å‹åˆ—è¡¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œå¥½å‹æ“ä½œï¼Œå¦‚æŸ¥æ‰¾å…±åŒçš„å¥½å‹ã€è®¡ç®—å¥½å‹æ•°ç­‰ã€‚ é›†æˆå‘˜æŸ¥æ‰¾ï¼šRedisçš„Setæ•°æ®ç»“æ„å¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œæˆå‘˜çš„æŸ¥æ‰¾æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨äºå®ç°é»‘ç™½åå•çš„åˆ¤æ–­ï¼Œå¿«é€Ÿåˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­ã€‚ ç‚¹èµã€æ”¶è—ç­‰åŠŸèƒ½ï¼šå¯ä»¥ä½¿ç”¨Setæ¥å­˜å‚¨ç”¨æˆ·å¯¹æŸä¸ªå®ä½“ï¼ˆå¦‚æ–‡ç« ã€è¯„è®ºã€å•†å“ç­‰ï¼‰çš„ç‚¹èµã€æ”¶è—å…³ç³»ã€‚ä¸ªå®ä½“çš„ç‚¹èµã€æ”¶è—ç”¨æˆ·å°±æ˜¯ä¸€ä¸ªSetã€‚é€šè¿‡Setæä¾›çš„æ·»åŠ ã€åˆ é™¤ã€è®¡æ•°ç­‰æ“ä½œï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†ç‚¹èµã€æ”¶è—å…³ç³»ã€‚ åŸºæœ¬æ“ä½œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # å‘ Set ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ SADD key value1 [value2...] # ä» Set åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ SREM key value1 [value2...] # åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äº Set ä¸­ã€‚ SISMEMBER key value # è·å– Set ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ SMEMBERS myset # è·å–é›†åˆçš„æˆå‘˜æ•° SCARD key # ç§»é™¤å¹¶è¿”å› Set ä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´  SPOP key # è¿”å›æ‰€æœ‰ Set çš„äº¤é›† SINTER key1 [key2...] # è¿”å›æ‰€æœ‰ Set çš„å¹¶é›† SUNION key1 [key2...] # è¿”å›æ‰€æœ‰ Set çš„å·®é›† SDIFF key1 [key2...] Java ä»£ç æµ‹è¯• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Test void testSet() { // å‘ Set ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ redisTemplate.opsForSet().add(\u0026#34;myset\u0026#34;, \u0026#34;value1\u0026#34;, \u0026#34;value2\u0026#34;, \u0026#34;value3\u0026#34;, \u0026#34;value4\u0026#34;); redisTemplate.opsForSet().add(\u0026#34;myset1\u0026#34;, \u0026#34;value1\u0026#34;, \u0026#34;value2\u0026#34;, \u0026#34;value6\u0026#34;, \u0026#34;value5\u0026#34;); // ä» Set åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ redisTemplate.opsForSet().remove(\u0026#34;myset\u0026#34;, \u0026#34;value3\u0026#34;, \u0026#34;value4\u0026#34;); // åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äº Set ä¸­ã€‚ System.out.println(redisTemplate.opsForSet().isMember(\u0026#34;myset\u0026#34;, \u0026#34;value1\u0026#34;)); // è·å– Set ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ System.out.println(redisTemplate.opsForSet().members(\u0026#34;myset\u0026#34;)); // è·å–é›†åˆçš„æˆå‘˜æ•° System.out.println(redisTemplate.opsForSet().size(\u0026#34;myset\u0026#34;)); // ç§»é™¤å¹¶è¿”å› Set ä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´  System.out.println(redisTemplate.opsForSet().pop(\u0026#34;myset\u0026#34;)); // è¿”å›æ‰€æœ‰ Set çš„äº¤é›† System.out.println(redisTemplate.opsForSet().intersect(\u0026#34;myset\u0026#34;, \u0026#34;myset1\u0026#34;)); // è¿”å›æ‰€æœ‰ Set çš„å¹¶é›† System.out.println(redisTemplate.opsForSet().union(\u0026#34;myset\u0026#34;, \u0026#34;myset1\u0026#34;)); // è¿”å›æ‰€æœ‰ Set çš„å·®é›† System.out.println(redisTemplate.opsForSet().difference(\u0026#34;myset\u0026#34;, \u0026#34;myset1\u0026#34;)); } Sorted Set Sorted Set ç±»ä¼¼äº Setï¼Œä½†å’Œ Set ç›¸æ¯”ï¼Œç»´æŠ¤äº†ä¸€ä¸ª double ç±»å‹çš„åˆ†æ•°ï¼Œä½¿å¾—é›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰åˆ†æ•°æ’åˆ—ã€‚\nåº”ç”¨åœºæ™¯ æ’è¡Œæ¦œï¼šå¯ä»¥ä½¿ç”¨Sorted Setæ¥å­˜å‚¨ç”¨æˆ·çš„å¾—åˆ†æˆ–å…¶ä»–è¯„åˆ†æŒ‡æ ‡ï¼Œå¹¶æŒ‰ç…§åˆ†æ•°è¿›è¡Œæ’åºï¼Œä»è€Œå®ç°æ’è¡Œæ¦œåŠŸèƒ½ã€‚é€šè¿‡Sorted Setæä¾›çš„æ“ä½œï¼Œå¦‚æ·»åŠ æˆå‘˜ã€æ›´æ–°åˆ†æ•°ã€æ ¹æ®åˆ†æ•°èŒƒå›´è·å–æˆå‘˜ç­‰ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ’è¡Œæ¦œçš„ç»´æŠ¤å’ŒæŸ¥è¯¢ã€‚ ç§¯åˆ†ç³»ç»Ÿï¼šå¯ä»¥ä½¿ç”¨Sorted Setæ¥å­˜å‚¨ç”¨æˆ·çš„ç§¯åˆ†ï¼Œå¹¶æŒ‰ç…§ç§¯åˆ†è¿›è¡Œæ’åºã€‚é€šè¿‡Sorted Setæä¾›çš„æ“ä½œï¼Œå¦‚æ·»åŠ æˆå‘˜ã€æ›´æ–°åˆ†æ•°ã€æ ¹æ®åˆ†æ•°èŒƒå›´è·å–æˆå‘˜ç­‰ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥è¯¢ç”¨æˆ·çš„æ’åã€å‰å‡ åç”¨æˆ·ç­‰åŠŸèƒ½ã€‚ çƒ­é—¨æ–‡ç« ï¼šå¯ä»¥ä½¿ç”¨Sorted Setæ¥å­˜å‚¨æ–‡ç« ä»¥åŠå…¶é˜…è¯»é‡æˆ–ç‚¹èµæ•°ç­‰æŒ‡æ ‡ï¼Œå¹¶æŒ‰ç…§æŒ‡æ ‡è¿›è¡Œæ’åºã€‚é€šè¿‡Sorted Setæä¾›çš„æ“ä½œï¼Œå¦‚æ·»åŠ æˆå‘˜ã€æ›´æ–°åˆ†æ•°ã€æ ¹æ®åˆ†æ•°èŒƒå›´è·å–æˆå‘˜ç­‰ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥è¯¢çƒ­é—¨æ–‡ç« ã€çƒ­é—¨æ ‡ç­¾ç­‰åŠŸèƒ½ã€‚ åŸºæœ¬æ“ä½œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 # å‘ Sorted Set æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªåŸç´ ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨å…ƒç´ çš„åˆ†æ•° ZADD key score1 value1 [score2 value2...] # è·å– Sorted Set ä¸­å…ƒç´ çš„ä¸ªæ•° ZCARD key # ç§»é™¤ Sorted Set ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåŸç´  ZREM key value1 [value2...] # è·å– Sorted Set ä¸­æŒ‡å®šå…ƒç´ çš„åˆ†æ•° ZSCORE key value # ç»™æŒ‡å®šå…ƒç´ æ·»åŠ åˆ†æ•° ZINCRBY key increment value # æ ¹æ®åˆ†æ•°èŒƒå›´è·å– Sorted Set ä¸­çš„å…ƒç´  ZRANGEBYSCORE key score1 score2 # é€šè¿‡ç´¢å¼•è¿”å› Sorted Set ä¸­æŒ‡å®šåŒºé—´çš„æˆå‘˜ï¼ˆåˆ†æ•°ä»ä½åˆ°é«˜ï¼‰ ZRANGE key start stop # é€šè¿‡ç´¢å¼•è¿”å› Sorted Set ä¸­æŒ‡å®šåŒºé—´çš„æˆå‘˜ï¼ˆåˆ†æ•°ä»é«˜åˆ°ä½ï¼‰ ZREVRANGE key start stop # è·å–æŒ‡å®šå…ƒç´ æ’åï¼Œè¿”å› Sorted Set ä¸­çš„ç´¢å¼• ZRANK key value # è·å–å¤šä¸ª Sorted Set ä¸­çš„äº¤é›†å¹¶å­˜å‚¨åœ¨æ–°çš„ Sorted Set ä¸­ ZINTERSTORE destination numkeys key1 [key2...] # è·å–å¤šä¸ª Sorted Set ä¸­çš„å¹¶é›†å¹¶å­˜å‚¨åœ¨æ–°çš„ Sorted Set ä¸­ ZUNIONSTORE destination numkeys key1 [key2...] # è·å–å¤šä¸ª Sorted Set ä¸­çš„å·®é›†å¹¶å­˜å‚¨åœ¨æ–°çš„ Sorted Set ä¸­ ZDIFF destination numkeys key1 [key2...] Java ä»£ç æµ‹è¯• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 @Test void testZSet() { // å‘ Sorted Set æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªåŸç´ ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨å…ƒç´ çš„åˆ†æ•° redisTemplate.opsForZSet().add(\u0026#34;myzset\u0026#34;, \u0026#34;value1\u0026#34;, 3.14); redisTemplate.opsForZSet().add(\u0026#34;myzset\u0026#34;, \u0026#34;value2\u0026#34;, 3.141); redisTemplate.opsForZSet().add(\u0026#34;myzset\u0026#34;, \u0026#34;value3\u0026#34;, 3.1415); // è·å– Sorted Set ä¸­å…ƒç´ çš„ä¸ªæ•° System.out.println(redisTemplate.opsForZSet().size(\u0026#34;myzset\u0026#34;)); // ç§»é™¤ Sorted Set ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåŸç´  redisTemplate.opsForZSet().remove(\u0026#34;myzset\u0026#34;, \u0026#34;value3\u0026#34;); // è·å– Sorted Set ä¸­æŒ‡å®šå…ƒç´ çš„åˆ†æ•° System.out.println(redisTemplate.opsForZSet().score(\u0026#34;myzset\u0026#34;, \u0026#34;value1\u0026#34;)); // ç»™æŒ‡å®šå…ƒç´ æ·»åŠ åˆ†æ•° redisTemplate.opsForZSet().incrementScore(\u0026#34;myzset\u0026#34;, \u0026#34;value2\u0026#34;, 1.1); // æ ¹æ®åˆ†æ•°èŒƒå›´è·å– Sorted Set ä¸­çš„å…ƒç´  System.out.println(redisTemplate.opsForZSet().rangeByScore(\u0026#34;myzset\u0026#34;, 1, 6)); // é€šè¿‡ç´¢å¼•è¿”å› Sorted Set ä¸­æŒ‡å®šåŒºé—´çš„æˆå‘˜ï¼ˆåˆ†æ•°ä»ä½åˆ°é«˜ï¼‰ System.out.println(redisTemplate.opsForZSet().range(\u0026#34;myzset\u0026#34;, 1, 2)); // é€šè¿‡ç´¢å¼•è¿”å› Sorted Set ä¸­æŒ‡å®šåŒºé—´çš„æˆå‘˜ï¼ˆåˆ†æ•°ä»é«˜åˆ°ä½ï¼‰ System.out.println(redisTemplate.opsForZSet().reverseRange(\u0026#34;myzset\u0026#34;, 1, 2)); // è·å–æŒ‡å®šå…ƒç´ æ’åï¼Œè¿”å› Sorted Set ä¸­çš„ç´¢å¼• System.out.println(redisTemplate.opsForZSet().rank(\u0026#34;myzset\u0026#34;, \u0026#34;value1\u0026#34;)); // è·å–å¤šä¸ª Sorted Set ä¸­çš„äº¤é›†å¹¶å­˜å‚¨åœ¨æ–°çš„ Sorted Set ä¸­ redisTemplate.opsForZSet().add(\u0026#34;myzset1\u0026#34;, \u0026#34;value1\u0026#34;, 3.14); redisTemplate.opsForZSet().intersectAndStore(\u0026#34;newzset1\u0026#34;, \u0026#34;myzset1\u0026#34;, \u0026#34;myzset\u0026#34;); // è·å–å¤šä¸ª Sorted Set ä¸­çš„å¹¶é›†å¹¶å­˜å‚¨åœ¨æ–°çš„ Sorted Set ä¸­ redisTemplate.opsForZSet().unionAndStore(\u0026#34;newzset1\u0026#34;, \u0026#34;myzset1\u0026#34;, \u0026#34;myzset\u0026#34;); // è·å–å¤šä¸ª Sorted Set ä¸­çš„å·®é›†å¹¶å­˜å‚¨åœ¨æ–°çš„ Sorted Set ä¸­ redisTemplate.opsForZSet().differenceAndStore(\u0026#34;newzset1\u0026#34;, Collections.singleton(\u0026#34;myzset1\u0026#34;), \u0026#34;myzset\u0026#34;); } é«˜çº§æ•°æ®ç»“æ„ Geospatial åº”ç”¨åœºæ™¯ é™„è¿‘æœç´¢ï¼šåœ°ç†ä½ç½®æœåŠ¡åº”ç”¨ï¼ˆå¦‚æ‰“è½¦è½¯ä»¶ã€å¤–å–å¹³å°ï¼‰å¯ä»¥åˆ©ç”¨ Redis çš„åœ°ç†ç©ºé—´ç´¢å¼•æ¥å¿«é€Ÿæ‰¾åˆ°ç”¨æˆ·é™„è¿‘çš„å¸æœºæˆ–é¤é¦†ã€‚ è·¯çº¿è§„åˆ’ä¸è·ç¦»è®¡ç®—ï¼šå¯¹äºéœ€è¦è¿›è¡Œè·¯å¾„è§„åˆ’æˆ–è€…è·ç¦»è®¡ç®—çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ç‰©æµé…é€ç³»ç»Ÿï¼Œå¯ä»¥åˆ©ç”¨GEODISTå‘½ä»¤æ¥è·å–ä¸¤ä¸ªåœ°ç†ä½ç½®ä¹‹é—´çš„è·ç¦»ã€‚ åŸºäºä½ç½®çš„å¹¿å‘Šæ¨é€ï¼šé›¶å”®ä¸šå¯ä»¥åˆ©ç”¨åœ°ç†ä¿¡æ¯å‘é¡¾å®¢æ¨é€é™„è¿‘åº—é“ºçš„ä¿ƒé”€ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨å•†åœºåŒºåŸŸå†…å‘é€ä¼˜æƒ åˆ¸ç»™è¿›å…¥è¯¥åŒºåŸŸçš„é¡¾å®¢ã€‚ åŸºæœ¬æ“ä½œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ å¯¹åº”çš„ç»çº¬åº¦ä¿¡æ¯åˆ° GEO ä¸­ GEOADD key longitude1 latitude1 member1 [longitude2 latitude2 member2...] # è¿”å›ç»™å®šå…ƒç´ çš„ç»çº¬åº¦ä¿¡æ¯ GEOPOS key member1 [member2...] # è®¡ç®—ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„è·ç¦» GEODIST key member1 member2 [m|km|ft|mi] # è¿”å›ä¸€ä¸ªå¤šå¤šä¸ªä½ç½®å¯¹è±¡çš„ geohash å€¼ GEOHASH key member1 [member2...] # æ ¹æ®ç»™å®šçš„ç»çº¬åº¦åæ ‡æ¥è·å–æŒ‡å®šèŒƒå›´å†…çš„åœ°ç†ä½ç½®é›†åˆ GEORADIUS key longitude latitude radius [m|km|ft|mi] # æ ¹æ®å­˜å‚¨åœ¨ä½ç½®é›†åˆé‡Œé¢çš„æŸä¸ªåœ°ç‚¹è·å–æŒ‡å®šèŒƒå›´å†…çš„åœ°ç†ä½ç½®é›†åˆ GEORADIUSBYMEMBER key member radius [m|km|ft|mi] Java ä»£ç æµ‹è¯• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 @Test void testGeo() { // æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ å¯¹åº”çš„ç»çº¬åº¦ä¿¡æ¯åˆ° GEO ä¸­ redisTemplate.opsForGeo().add(\u0026#34;cities\u0026#34;, new Point(-73.935242, 40.73061), \u0026#34;New York\u0026#34;); redisTemplate.opsForGeo().add(\u0026#34;cities\u0026#34;, new Point(-0.127758, 51.507351), \u0026#34;London\u0026#34;); redisTemplate.opsForGeo().add(\u0026#34;cities\u0026#34;, new Point(116.407526, 39.90403), \u0026#34;Beijing\u0026#34;); // è¿”å›ç»™å®šå…ƒç´ çš„ç»çº¬åº¦ä¿¡æ¯ List\u0026lt;Point\u0026gt; position = redisTemplate.opsForGeo().position(\u0026#34;cities\u0026#34;, \u0026#34;New York\u0026#34;, \u0026#34;London\u0026#34;); System.out.println(position); // è®¡ç®—ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„è·ç¦» Distance distance = redisTemplate.opsForGeo().distance(\u0026#34;cities\u0026#34;, \u0026#34;New York\u0026#34;, \u0026#34;London\u0026#34;, RedisGeoCommands.DistanceUnit.KILOMETERS); System.out.println(distance); System.out.println(distance.getValue()); // è¿”å›ä¸€ä¸ªå¤šå¤šä¸ªä½ç½®å¯¹è±¡çš„ geohash å€¼ List\u0026lt;String\u0026gt; hash = redisTemplate.opsForGeo().hash(\u0026#34;cities\u0026#34;, \u0026#34;New York\u0026#34;, \u0026#34;London\u0026#34;); System.out.println(hash); // æ ¹æ®ç»™å®šçš„ç»çº¬åº¦åæ ‡æ¥è·å–æŒ‡å®šèŒƒå›´å†…çš„åœ°ç†ä½ç½®é›†åˆ Circle circle = new Circle(-73.935242, 40.73061, Metrics.KILOMETERS.getMultiplier()); RedisGeoCommands.GeoRadiusCommandArgs args = RedisGeoCommands.GeoRadiusCommandArgs.newGeoRadiusArgs() .includeDistance() //åŒ…å«è·ç¦» .includeCoordinates() //åŒ…å«åæ ‡ .sortAscending() //å‡åº .limit(50); GeoResults\u0026lt;RedisGeoCommands.GeoLocation\u0026lt;Object\u0026gt;\u0026gt; byxy = redisTemplate.opsForGeo().radius(\u0026#34;cities\u0026#34;, circle, args); byxy.forEach(r -\u0026gt; System.out.println(r)); } ","date":"2024-09-25T18:11:03+08:00","image":"https://limincai.github.io/p/redis-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/redis-quick-start-cover_hu10470396823172311135.jpg","permalink":"https://limincai.github.io/p/redis-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/","title":"Redis å¿«é€Ÿå…¥é—¨"},{"content":"æ ‡é¢˜ # å†…å®¹ä¸ºæ ‡é¢˜ï¼Œå‡ ä¸ª#ä»£è¡¨å‡ çº§æ ‡é¢˜ã€‚\nä¸€çº§æ ‡é¢˜ äºŒçº§æ ‡é¢˜ ä¸‰çº§æ ‡é¢˜ 1 2 3 4 5 # ä¸€çº§æ ‡é¢˜ ## äºŒçº§æ ‡é¢˜ ### ä¸‰çº§æ ‡é¢˜ å¼•ç”¨å— \u0026gt; å†…å®¹ä¸ºå¼•ç”¨å—ï¼Œç”¨äºå¼•ç”¨å†…å®¹ã€‚\nå¼•ç”¨å—\nğŸª† å¥—å¨ƒå¼•ç”¨å—\n1 2 \u0026gt; å¼•ç”¨å— \u0026gt; \u0026gt;\u0026gt; ğŸª† å¥—å¨ƒå¼•ç”¨å— ä»£ç å—ä¸ä»£ç æ®µ ä»£ç å—ã€‚\n1 ä»£ç æ®µ 1 2 3 4 5 6 7 `ä»£ç å—`ã€‚ # å…¶ä¸­â€œjavaâ€ä¸ºä»£ç å—è¯­è¨€ï¼Œå¯ä»¥æ›¿æ¢ã€‚ ```java System.out.println(\u0026#34;Hello, World!\u0026#34;); ``` å­—ä½“æ ·å¼ æ–œä½“ *æ–œä½“* æ–œä½“\nç²—ä½“ **ç²—ä½“**\nç²—ä½“\nåˆ é™¤çº¿ ~~åˆ é™¤çº¿å†…å®¹~~\nåˆ é™¤çº¿å†…å®¹\nä¸‹åˆ’çº¿ \u0026lt;u\u0026gt;ä¸‹åˆ’çº¿å†…å®¹\u0026lt;/u\u0026gt;\nä¸‹åˆ’çº¿å†…å®¹\næ–‡æœ¬é«˜äº® ==å†…å®¹==\n==å†…å®¹==\næ–‡æœ¬ä¸Šä¸‹æ ‡ æˆ‘æ˜¯æ–‡æœ¬^æˆ‘æ˜¯ä¸Šæ ‡^\næˆ‘æ˜¯æ–‡æœ¬æˆ‘æ˜¯ä¸‹æ ‡\n1 2 3 æˆ‘æ˜¯æ–‡æœ¬^æˆ‘æ˜¯ä¸Šæ ‡^ æˆ‘æ˜¯æ–‡æœ¬~æˆ‘æ˜¯ä¸‹æ ‡~ åˆ†éš”ç¬¦ 1 --- è¡¨æ ¼ æœ€ä¸Šä¸€æ’å°±æ˜¯è¡¨å¤´ï¼Œéœ€è¦åœ¨å·¦å³ä½¿ç”¨|è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼ŒåŒæ—¶ï¼Œä¸‹æ–¹éœ€è¦æ·»åŠ åˆ†å‰²çº¿ï¼Œåˆ†å‰²çº¿ä½¿ç”¨-å‡å·è¡¨ç¤ºã€‚\nä¸€ äºŒ ä¸‰ å›› äº” 1 2 3 4 5 1 2 3 | ä¸€ | äºŒ | ä¸‰ | å›› | äº” | | --- | --- | --- | --- | --- | | 1 | 2 | 3 | 4 | 5 | å…¶ä¸­ï¼š\n:--- ä¸ºå·¦å¯¹é½ :---: ä¸ºå‰§ä¸­å¯¹é½ ---: ä¸ºå³å¯¹é½ ä¸€ äºŒ ä¸‰ å›› äº” 1 2 3 4 5 1 2 3 | ä¸€ | äºŒ | ä¸‰ | å›› | äº” | | --: | --: | :-: | :-- | :-- | | 1 | 2 | 3 | 4 | 5 | æœ‰åºåˆ—è¡¨ è¾“å…¥å½“å‰åºå·åæŒ‰é€€æ ¼é”®ï¼ˆTabï¼‰å¯ä»¥å˜ä¸ºå­åºå·ã€‚\nä¸€ äºŒ ä¸‰ å›› 1 2 3 4 1. ä¸€ 1. äºŒ 1. ä¸‰ 1. å›› æ— åºåˆ—è¡¨ ç”¨æ³•ä¸æœ‰åºåˆ—è¡¨ç±»ä¼¼ã€‚\nä¸€ äºŒ ä¸‰ å›› 1 2 3 4 - ä¸€ - äºŒ - ä¸‰ - å›› å‹¾é€‰æ¡† æˆ‘æ˜¯æœªå®Œæˆçš„ä»»åŠ¡ æˆ‘æ˜¯å·²å®Œæˆçš„ä»»åŠ¡ 1 2 - [ ] æˆ‘æ˜¯æœªå®Œæˆçš„ä»»åŠ¡ - [x] æˆ‘æ˜¯å·²å®Œæˆçš„ä»»åŠ¡ å›¾ç‰‡æ’å…¥ html å†™æ³• \u0026lt;img src=\u0026quot;å›¾ç‰‡è·¯å¾„\u0026quot; width=200 heigth=200\u0026gt;\nmarkdown å†™æ³•ï¼Œè¿™ç§å†™æ³•æ— æ³•ä¸»åŠ¨ä¿®æ”¹å›¾ç‰‡å°ºå¯¸ã€‚\n![å›¾ç‰‡æè¿°](å›¾ç‰‡åœ°å€ \u0026quot;å›¾ç‰‡åç§°ï¼Œå¯é€‰\u0026quot;)\né“¾æ¥ [é“¾æ¥æ–‡æœ¬](é“¾æ¥åœ°å€)\næœ‰é—®é¢˜è¯·ç™¾åº¦\nè„šæ³¨ java1æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ã€‚\n1 2 java[^1]æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ã€‚ [^1]:ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ã€‚ æ•°å­¦å…¬å¼ å…¬å¼å— éœ€è¦ç¼–å†™æ•°å­¦å…¬å¼ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦åœ¨ç‰¹å®šçš„å—ä¸­ç¼–å†™ï¼Œå…¬å¼å—ä½¿ç”¨$ç¾å…ƒç¬¦è¡¨ç¤ºã€‚å¤šè¡Œå…¬å¼ä½¿ç”¨è¿ç»­çš„ä¸¤ä¸ªç¾å…ƒç¬¦ï¼š $$ æˆ‘æ˜¯å…¬å¼ $$ 1 2 3 $$ æˆ‘æ˜¯å…¬å¼ $$ å¦‚æœåªæƒ³åœ¨è¡Œå†…ç¼–å†™ï¼Œä¸€è¡Œå†…å®¹åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªç¾å…ƒç¬¦å›Šæ‹¬å³å¯ï¼š\n$ x = 17 + y $\n1 $ x = 17 + y $ ç‰¹æ®Šæ•°å­¦ç¬¦å· ä»£ç  ç¬¦å· æè¿° \\not= \\= ä¸ç­‰äº \\approx â‰ˆ çº¦ç­‰äº \\times Ã— ä¹˜å· \\div Ã· é™¤å· \\leq â‰¤ å°äºç­‰äº \\geq â‰¥ å¤§äºç­‰äº \\pm Â± æ­£è´Ÿå· \\sum âˆ‘ æ±‚å’Œç¬¦å·ï¼ˆç´¯åŠ ï¼‰ \\prod âˆ ç´¯ä¹˜ \\coprod âˆ ç´¯é™¤ \\overline{a + b + c} a+b+c / 3 å¹³å‡å€¼ æ•°å­¦ä¸­å¸¸è§ç‰¹æ®Šå­—ç¬¦ï¼š\nä»£ç  ç¬¦å· ä»£ç  ç¬¦å· \\alpha Î± \\beta Î² \\gamma Î³ \\delta Î´ \\epsilon Ïµ \\eta Î·* \\theta Î¸ \\pi Ï€ \\omega Ï‰ \\rho Ï \\sigma Ïƒ \\mu Î¼ å¸¸è§çš„ä¸‰è§’å‡½æ•°ï¼š\nä»£ç  ç¬¦å· æè¿° \\sin sin æ­£å¼¦ \\cos cosâ¡ ä½™å¼¦ \\tan tanâ¡ æ­£åˆ‡ \\cot cotâ¡ ä½™åˆ‡ \\sec secâ¡ æ­£å‰² \\csc cscâ¡ ä½™å‰² \\circ âˆ˜ åº¦ ç§¯åˆ†å’Œæ±‚å¯¼ç›¸å…³ï¼š\nä»£ç  ç¬¦å· æè¿° \\infty âˆ æ— ç©· \\int âˆ« å®šç§¯åˆ† \\iint âˆ¬ åŒé‡ç§¯åˆ† \\iiint âˆ­ ä¸‰é‡ç§¯åˆ† \\oint âˆ® æ›²çº¿ç§¯åˆ† x\\prime xâ€² æ±‚å¯¼ \\lim limâ¡ æé™ é›†åˆç›¸å…³ï¼š\nä»£ç  ç¬¦å· æè¿° \\emptyset âˆ… ç©ºé›† \\in âˆˆ å±äº \\notin âˆ‰ ä¸å±äº \\supset âŠƒ çœŸåŒ…å« \\supseteq âŠ‡ åŒ…å« \\bigcap â‹‚ äº¤é›† \\bigcup â‹ƒ å¹¶é›† å¯¹æ•°å‡½æ•°ç›¸å…³ï¼š\nä»£ç  ç¬¦å· æè¿° \\log logâ¡ å¯¹æ•°å‡½æ•° \\ln lnâ¡ ä»¥eä¸ºåº•çš„å¯¹æ•°å‡½æ•° \\lg lgâ¡ ä»¥10ä¸ºåº•çš„å¯¹æ•°å‡½æ•° åˆ†æ•° $ \\frac{åˆ†å­}{åˆ†æ¯} $\n$ \\frac{åˆ†å­}{åˆ†æ¯} $\nå¼€æ–¹ $\\sqrt{4}$\n$\\sqrt{4}$\nå¦‚æœéœ€è¦ä¿®æ”¹æ ¹å·ä¸Šæ–¹æ•°å€¼ï¼Œå¯ä»¥æ·»åŠ ä¸­æ‹¬å·ã€‚\n$\\sqrt[3]{8}$\n$\\sqrt[3]{8}$\nä¸Šä¸‹æ ‡ ^ è¡¨ç¤ºä¸Šæ ‡ï¼Œ_è¡¨ç¤ºä¸‹æ ‡ã€‚\n$ x_ä¸‹æ ‡ $\n$ x^ä¸Šæ ‡ $\n$ x^ä¸Šæ ‡_ä¸‹æ ‡ $\n1 2 3 $ x_ä¸‹æ ‡ $ $ x^ä¸Šæ ‡ $ $ x^ä¸Šæ ‡_ä¸‹æ ‡ $ å¦‚æœä¸Šæ ‡æˆ–ä¸‹æ ‡å†…å®¹å¤šäºä¸€ä¸ªå­—ç¬¦ï¼Œéœ€è¦ä½¿ç”¨ {} æ‹¬èµ·æ¥ï¼ŒåŒ…æ‹¬åç»­çš„å…¶ä»–ä»£ç å¦‚æœå‡ºç°åªæœ‰ä¸€ä¸ªå­—ç¬¦ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼Œè€ƒè™‘ä½¿ç”¨èŠ±æ‹¬å·å›Šæ‹¬å…¨éƒ¨å†…å®¹ï¼š\n$ x*_{ä¸‹æ ‡} $\n$ x^{ä¸Šæ ‡} $\n$ x^{ä¸Šæ ‡}_{ä¸‹æ ‡} $\n1 2 3 $ x_{ä¸‹æ ‡} $ $ x^{ä¸Šæ ‡} $ $ x^{ä¸Šæ ‡}_{ä¸‹æ ‡} $ ç§¯åˆ† `$\\int_ç§¯åˆ†ä¸‹é™^ç§¯åˆ†ä¸Šé™xdx $\n$\\int_1^2xdx $\næé™ $ \\lim_{n\\rightarrow+\\infty}\\frac{1}{n + 1} $\n$ \\lim_{n\\rightarrow+\\infty}\\frac{1}{n + 1} $\nå…¶ä»–ç¬¦å· ä»£ç  ç¬¦å· æè¿° $ \\vec{a} $ $ \\vec{a} $ å‘é‡ç¬¦å· $ \\cdots $ $ \\cdots $ å±…ä¸­çœç•¥å· $ \\ldots $ $ \\ldots $ é åº•éƒ¨çš„çœç•¥å· $ \\cdot $ $ \\cdot $ ç‚¹ä¹˜å· $ \\sum*_1^n $* $ \\sum_1^n $* ç´¯åŠ  html æ ‡ç­¾ markdown æ”¯æŒ html æ ‡ç­¾ï¼Œå¯ä»¥æ›´åŠ ä¸ªæ€§åŒ–çš„è‡ªå®šä¹‰å†…å®¹ã€‚\nä¾‹å¦‚ï¼š\n1 2 \u0026lt;iframe src=\u0026#34;https://limincai.github.io/\u0026#34; height=\u0026#34;1080\u0026#34; width=\u0026#34;1080\u0026#34; sandbox=\u0026#34;allow-scripts\u0026#34; scrolling=\u0026#34;yes\u0026#34;\u0026gt;\u0026lt;/iframe ","date":"2024-09-22T20:11:03+08:00","image":"https://limincai.github.io/p/markdown-%E8%AF%AD%E6%B3%95/markdown-synatax-cover_hu10298755978458750581.webp","permalink":"https://limincai.github.io/p/markdown-%E8%AF%AD%E6%B3%95/","title":"Markdown è¯­æ³•"}]